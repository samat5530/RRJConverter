<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>RRJConverter</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.0/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body>
    <h2>Конвертация валют</h2>
    <table id="main-table" class="table table-condensed table-striped  col-md-6">
        <tr>
            <td><label>Введите количество</label></td>
            <th>
                <input id="fromCurrencyCount" type="text" name="fromCurrencyCount" />
            </th>
            <td>
                <select id="fromCurrency">
                    <option value="AUD">Австралийский доллар</option>
                    <option value="AZN">Азербайджанский манат</option>
                    <option value="GBP">Фунт стерлингов Соединенного королевства</option>
                    <option value="AMD">Армянских драмов</option>
                    <option value="BYN">Белорусский рубль</option>
                    <option value="BGN">Болгарский лев</option>
                    <option value="BRL">Бразильский реал</option>
                    <option value="HUF">Венгерских форинтов</option>
                    <option value="HKD">Гонконгский доллар</option>
                    <option value="DKK">Датская крона</option>
                    <option value="USD">Доллар США</option>
                    <option value="EUR">Евро</option>
                    <option value="INR">Индийских рупий</option>
                    <option value="KZT">Казахстанских тенге</option>
                    <option value="CAD">Канадский доллар</option>
                    <option value="KGS">Киргизских сомов</option>
                    <option value="CNY">Китайский юань</option>
                    <option value="MDL">Молдавских леев</option>
                    <option value="NOK">Норвежская крона</option>
                    <option value="PLN">Польский злотый</option>
                    <option value="RON">Румынский лей</option>
                    <option value="RUB">Российский рубль</option>
                    <option value="XDR">СДР (специальные права заимствования)</option>
                    <option value="SGD">Сингапурский доллар</option>
                    <option value="TJS">Таджикских сомони</option>
                    <option value="TRY">Турецких лир</option>
                    <option value="TMT">Новый туркменский манат</option>
                    <option value="UZS">Узбекских сумов</option>
                    <option value="UAH">Украинских гривен</option>
                    <option value="CZK">Чешских крон</option>
                    <option value="SEK">Шведская крона</option>
                    <option value="CHF">Швейцарский франк</option>
                    <option value="ZAR">Южноафриканских рэндов</option>
                    <option value="KRW">Вон Республики Корея</option>
                    <option value="JPY">Японских иен</option>
                </select>
            </td>
            <td>=</td>
            <td id="toCurrencyCount">
            </td>
            <td>
                <select id="toCurrency">
                    <option value="AUD">Австралийский доллар</option>
                    <option value="AZN">Азербайджанский манат</option>
                    <option value="GBP">Фунт стерлингов Соединенного королевства</option>
                    <option value="AMD">Армянских драмов</option>
                    <option value="BYN">Белорусский рубль</option>
                    <option value="BGN">Болгарский лев</option>
                    <option value="BRL">Бразильский реал</option>
                    <option value="HUF">Венгерских форинтов</option>
                    <option value="HKD">Гонконгский доллар</option>
                    <option value="DKK">Датская крона</option>
                    <option value="USD">Доллар США</option>
                    <option value="EUR">Евро</option>
                    <option value="INR">Индийских рупий</option>
                    <option value="KZT">Казахстанских тенге</option>
                    <option value="CAD">Канадский доллар</option>
                    <option value="KGS">Киргизских сомов</option>
                    <option value="CNY">Китайский юань</option>
                    <option value="MDL">Молдавских леев</option>
                    <option value="NOK">Норвежская крона</option>
                    <option value="PLN">Польский злотый</option>
                    <option value="RON">Румынский лей</option>
                    <option value="RUB">Российский рубль</option>
                    <option value="XDR">СДР (специальные права заимствования)</option>
                    <option value="SGD">Сингапурский доллар</option>
                    <option value="TJS">Таджикских сомони</option>
                    <option value="TRY">Турецких лир</option>
                    <option value="TMT">Новый туркменский манат</option>
                    <option value="UZS">Узбекских сумов</option>
                    <option value="UAH">Украинских гривен</option>
                    <option value="CZK">Чешских крон</option>
                    <option value="SEK">Шведская крона</option>
                    <option value="CHF">Швейцарский франк</option>
                    <option value="ZAR">Южноафриканских рэндов</option>
                    <option value="KRW">Вон Республики Корея</option>
                    <option value="JPY">Японских иен</option>
                </select>
            </td>
            <td>
                <button onclick="Convert()" class="btn btn-primary">Конвертировать</button>
            </td>
        </tr>
    </table>

    <div>2022 © Gafiyatullin Samat aka RRJ</div>
    <script>
        // Получение данных
        async function GetValue(fromCurrency, count, toCurrency) {
            const response = await fetch('/api/Convert/?valute=' + fromCurrency + '&toValute=' + toCurrency + '&count=' + count, {
                method: "GET",
                headers: { "Accept": "application/json"}
            });
            if (response.ok === true) {
                const responseJson = await response.json();
                document.getElementById('toCurrencyCount').innerHTML = responseJson.result;
            }
        }
        async function Convert() {
            const fromCurrency = document.getElementById('fromCurrency').value;
            const fromCurrencyCount = document.getElementById('fromCurrencyCount').value;
            const toCurrency = document.getElementById('toCurrency').value;
            await GetValue(fromCurrency, fromCurrencyCount, toCurrency);
        }       
    </script>
</body>
</html>